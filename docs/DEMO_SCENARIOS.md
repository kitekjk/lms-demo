# LMS Demo 시연 시나리오

이 문서는 LMS 시스템의 주요 기능을 역할별로 시연할 수 있는 가이드입니다.

## 사전 준비

### 시스템 시작

```bash
# 1. MySQL 시작
docker-compose up -d

# 2. 백엔드 서버 시작 (터미널 1)
./gradlew :interfaces:bootRun

# 3. 프론트엔드 시작 (터미널 2)
cd lms_mobile_web
flutter run -d chrome
```

### 테스트 계정

| 역할 | 이메일 | 비밀번호 | 소속 매장 |
|------|--------|----------|-----------|
| 관리자 (SUPER_ADMIN) | admin@lms.com | password123 | 전체 |
| 매니저 (MANAGER) | manager.gangnam@lms.com | password123 | 강남점 |
| 매니저 (MANAGER) | manager.hongdae@lms.com | password123 | 홍대점 |
| 직원 (EMPLOYEE) | employee1.gangnam@lms.com | password123 | 강남점 |
| 직원 (EMPLOYEE) | employee2.gangnam@lms.com | password123 | 강남점 |
| 직원 (EMPLOYEE) | employee1.hongdae@lms.com | password123 | 홍대점 |

---

## 시나리오 1: 관리자 (SUPER_ADMIN) 데모

**계정:** `admin@lms.com` / `password123`

관리자는 전체 시스템을 관리하며, 모든 매장과 사용자에 대한 권한을 가집니다.

### 1.1 로그인 및 대시보드 확인

1. **로그인**
   - 이메일: `admin@lms.com`
   - 비밀번호: `password123`
   - 로그인 버튼 클릭

2. **대시보드 확인**
   - 전체 매장 통계 확인
   - 오늘의 출근 현황
   - 최근 활동 내역

### 1.2 매장 관리

1. **매장 목록 조회**
   - 사이드 메뉴에서 "매장 관리" 클릭
   - 등록된 매장 목록 확인 (강남점, 홍대점, 신촌점)

2. **새 매장 등록**
   - "매장 추가" 버튼 클릭
   - 매장명: `판교점`
   - 위치: `경기도 성남시 분당구 판교역로 123`
   - 저장 버튼 클릭

3. **매장 정보 수정**
   - 신촌점 선택
   - 위치 정보 수정: `서울시 서대문구 연세로 50`
   - 저장

### 1.3 근로자 관리

1. **전체 근로자 목록 조회**
   - 사이드 메뉴에서 "근로자 관리" 클릭
   - 전체 매장의 근로자 목록 확인

2. **매장별 필터링**
   - 매장 필터에서 "강남점" 선택
   - 강남점 소속 근로자만 표시

3. **새 근로자 등록**
   - "근로자 추가" 버튼 클릭
   - 이름: `이새롬`
   - 이메일: `newemployee@lms.com`
   - 매장: `판교점`
   - 근무 유형: `정규직`
   - 연차: `15`
   - 저장

4. **근로자 정보 수정**
   - 김민수 선택
   - 연차 수정: `12.5`
   - 저장

### 1.4 급여 정책 관리

1. **급여 정책 확인** (Swagger UI 사용)
   - `http://localhost:8080/swagger-ui.html` 접속
   - `/api/payroll-policies` GET 요청
   - 현재 정책 확인:
     - 초과근무: 1.5배
     - 야간근무: 1.5배
     - 주말근무: 1.5배
     - 공휴일: 2.0배

### 1.5 로그아웃

- 우측 상단 프로필 메뉴에서 "로그아웃" 클릭

---

## 시나리오 2: 매니저 (MANAGER) 데모

**계정:** `manager.gangnam@lms.com` / `password123`

매니저는 담당 매장의 근로자와 일정을 관리합니다.

### 2.1 로그인 및 대시보드

1. **로그인**
   - 이메일: `manager.gangnam@lms.com`
   - 비밀번호: `password123`

2. **대시보드 확인**
   - 강남점 통계만 표시됨
   - 오늘의 출근 현황 (강남점)
   - 금주 근무 일정 요약

### 2.2 근무 일정 관리

1. **일정 캘린더 조회**
   - 사이드 메뉴에서 "근무 일정" 클릭
   - 월간 캘린더 뷰 확인

2. **새 근무 일정 등록**
   - 캘린더에서 원하는 날짜 클릭
   - "일정 추가" 버튼 클릭
   - 근로자: `김민수`
   - 날짜: (오늘 또는 내일)
   - 시작 시간: `09:00`
   - 종료 시간: `18:00`
   - 저장

3. **일정 수정**
   - 등록된 일정 클릭
   - 종료 시간: `19:00` (1시간 연장)
   - 저장

4. **주간/월간 뷰 전환**
   - 뷰 전환 버튼으로 주간/월간 전환
   - 각 뷰에서 일정 확인

### 2.3 근로자 출퇴근 현황 확인

1. **출퇴근 기록 조회**
   - 사이드 메뉴에서 "출퇴근 관리" 클릭
   - 오늘 날짜의 출퇴근 현황 확인

2. **날짜별 조회**
   - 날짜 선택기로 과거 날짜 선택
   - 해당 날짜의 출퇴근 기록 확인

3. **상태별 필터링**
   - 상태 필터: "지각" 선택
   - 지각한 근로자만 표시

### 2.4 휴가 신청 관리

1. **휴가 신청 목록 조회** (Swagger UI)
   - `/api/leave-requests` GET 요청
   - 강남점 근로자의 휴가 신청 목록 확인

2. **휴가 승인/거부**
   - 대기 중인 휴가 신청 선택
   - 승인 또는 거부 처리

### 2.5 강남점 근로자 관리

1. **소속 근로자 목록**
   - 사이드 메뉴에서 "근로자 관리" 클릭
   - 강남점 소속 근로자만 표시됨 (권한 제한)

2. **근로자 상세 정보 확인**
   - 김민수 선택
   - 상세 정보 확인:
     - 남은 연차
     - 근무 이력
     - 급여 정보 (요약)

---

## 시나리오 3: 직원 (EMPLOYEE) 데모

**계정:** `employee1.gangnam@lms.com` / `password123`

직원은 자신의 출퇴근 체크와 일정 확인, 휴가 신청이 가능합니다.

### 3.1 로그인 및 개인 대시보드

1. **로그인**
   - 이메일: `employee1.gangnam@lms.com`
   - 비밀번호: `password123`

2. **개인 대시보드 확인**
   - 오늘의 근무 일정
   - 이번 달 근무 시간 요약
   - 남은 연차: 13.5일

### 3.2 출퇴근 체크

1. **출근 체크**
   - 메인 화면의 "출근" 버튼 클릭
   - 현재 시간으로 출근 기록
   - 상태 표시: "정상 출근" 또는 "지각"

2. **퇴근 체크**
   - 메인 화면의 "퇴근" 버튼 클릭
   - 현재 시간으로 퇴근 기록
   - 오늘 근무 시간 표시

### 3.3 나의 근무 일정 확인

1. **캘린더 뷰**
   - 사이드 메뉴에서 "나의 일정" 클릭
   - 자신의 근무 일정만 표시

2. **일정 상세 확인**
   - 특정 일정 클릭
   - 근무 시간, 위치 등 상세 정보 확인

### 3.4 휴가 신청

1. **휴가 신청 화면 이동**
   - 사이드 메뉴에서 "휴가 신청" 클릭

2. **새 휴가 신청**
   - "휴가 신청" 버튼 클릭
   - 휴가 유형: `연차`
   - 시작일: (다음 주 월요일)
   - 종료일: (다음 주 월요일) - 1일 휴가
   - 사유: `개인 사유`
   - 제출

3. **휴가 신청 내역 확인**
   - 신청한 휴가 목록 확인
   - 상태: "대기 중"

4. **휴가 신청 취소**
   - 대기 중인 휴가 선택
   - "취소" 버튼 클릭
   - 취소 확인

### 3.5 나의 출퇴근 기록 조회

1. **기록 조회**
   - 사이드 메뉴에서 "출퇴근 기록" 클릭
   - 이번 달 출퇴근 기록 확인

2. **월별 조회**
   - 월 선택기로 이전 달 선택
   - 해당 월의 기록 확인

3. **통계 확인**
   - 총 근무 시간
   - 지각 횟수
   - 조퇴 횟수

### 3.6 개인 정보 확인

1. **프로필 확인**
   - 우측 상단 프로필 아이콘 클릭
   - 이름, 이메일, 소속 매장 확인

---

## 시나리오 4: 크로스 역할 시나리오

여러 역할을 오가며 시스템의 연동을 보여주는 시나리오입니다.

### 4.1 휴가 신청 → 승인 플로우

1. **직원이 휴가 신청**
   - `employee1.gangnam@lms.com`으로 로그인
   - 휴가 신청 (다음 주 금요일, 1일)
   - 로그아웃

2. **매니저가 휴가 승인**
   - `manager.gangnam@lms.com`으로 로그인
   - 휴가 신청 목록 확인
   - 김민수의 휴가 신청 승인
   - 로그아웃

3. **직원이 결과 확인**
   - `employee1.gangnam@lms.com`으로 로그인
   - 휴가 신청 내역에서 "승인됨" 확인
   - 남은 연차 차감 확인

### 4.2 근무 일정 등록 → 출퇴근 플로우

1. **매니저가 일정 등록**
   - `manager.gangnam@lms.com`으로 로그인
   - 오늘 날짜로 김민수 근무 일정 등록 (09:00 ~ 18:00)
   - 로그아웃

2. **직원이 출근**
   - `employee1.gangnam@lms.com`으로 로그인
   - 오늘 일정 확인
   - 출근 버튼 클릭
   - 출근 시간 기록됨

3. **매니저가 현황 확인**
   - `manager.gangnam@lms.com`으로 로그인
   - 출퇴근 현황에서 김민수 "출근" 상태 확인

### 4.3 관리자의 전체 현황 모니터링

1. **관리자 로그인**
   - `admin@lms.com`으로 로그인

2. **전체 매장 현황 확인**
   - 대시보드에서 전체 매장 통계 확인
   - 강남점, 홍대점 각각의 출근 현황

3. **특정 매장 상세 조회**
   - 강남점 선택
   - 해당 매장의 상세 통계 확인

---

## API 시연 (Swagger UI)

Swagger UI를 사용한 API 직접 테스트 시나리오입니다.

### 접속 URL
```
http://localhost:8080/swagger-ui.html
```

### 인증 토큰 획득

1. **로그인 API 호출**
   - `POST /api/auth/login`
   - Request Body:
     ```json
     {
       "email": "admin@lms.com",
       "password": "password123"
     }
     ```

2. **응답에서 토큰 복사**
   ```json
   {
     "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
     "refreshToken": "...",
     "tokenType": "Bearer"
   }
   ```

3. **Authorize 버튼 클릭**
   - `Bearer {accessToken}` 형식으로 입력

### 주요 API 테스트

| 기능 | 메서드 | 엔드포인트 |
|------|--------|-----------|
| 매장 목록 | GET | `/api/stores` |
| 매장 등록 | POST | `/api/stores` |
| 근로자 목록 | GET | `/api/employees` |
| 근로자 등록 | POST | `/api/employees` |
| 근무 일정 목록 | GET | `/api/schedules` |
| 일정 등록 | POST | `/api/schedules` |
| 출근 체크 | POST | `/api/attendance/check-in` |
| 퇴근 체크 | POST | `/api/attendance/check-out` |
| 휴가 신청 | POST | `/api/leave-requests` |
| 휴가 승인 | PUT | `/api/leave-requests/{id}/approve` |

---

## 시연 팁

### 시간 절약 팁

- 초기 데이터가 자동 로드되므로 별도 데이터 입력 불필요
- local 프로파일은 서버 재시작 시 데이터 초기화됨 (깨끗한 상태로 시연 가능)

### 효과적인 시연 순서

1. **관리자로 시작** → 전체 시스템 구조 설명
2. **매니저로 전환** → 일상 업무 플로우 시연
3. **직원으로 전환** → 모바일/웹 사용자 경험 시연
4. **크로스 시나리오** → 시스템 연동 보여주기

### 주의사항

- 데모 전 서버가 정상 작동하는지 확인
- 브라우저 캐시 문제 시 시크릿 모드 사용
- 여러 역할 시연 시 별도 브라우저 또는 시크릿 탭 활용

---

## 문제 해결

### 로그인 실패
- 서버가 실행 중인지 확인
- 올바른 계정 정보 입력 확인
- 서버 로그에서 오류 메시지 확인

### 데이터가 보이지 않음
- local 프로파일로 실행 중인지 확인
- 서버 재시작 후 다시 시도

### API 호출 실패
- 인증 토큰이 만료되지 않았는지 확인
- 토큰을 Bearer 형식으로 올바르게 입력했는지 확인
